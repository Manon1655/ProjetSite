{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/defile-modification.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
{% endblock %}


{% block body %}
<div class="container py-4">
    <h1 class="text-center mb-4">
        {% if app.request.attributes.get('_route') == 'admin_defile_ajout' %}
            Ajout d'un défilé
        {% else %}
            Modification d'un Défilé
        {% endif %}
    </h1>

    {{ form_start(formDefile, {'attr': {'novalidate': 'novalidate'}}) }}

    <div class="row mb-3">
        <div class="col-md-6">
            {{ form_row(formDefile.NomD) }}
        </div>
        <div class="col-md-6">
            {{ form_row(formDefile.Date) }}
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-12">
            {{ form_row(formDefile.marque) }}
        </div>
    </div>

    <div class="row mb-3">
            {% if formDefile.theme is not empty %}
                        <div class="col-md-6">
                            <h4>Thème associé :</h4>
                            <ul class="list-group">
                                {% for theme in formDefile.theme %}
                                    <li class="list-group-item">{{ theme.nomT }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}

                        {% if formDefile.mannequin is not empty %}
                            <div class="col-md-6">
                                <h4>Mannequins associés :</h4>
                                <ul class="list-group">
                                    {% for mannequin in formDefile.mannequin %}
                                        <li class="list-group-item">{{ mannequin.name }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}


       
        <div class="col-md-6">
            {{ form_row(formDefile.description) }}
        </div>
    </div>

    {{ form_end(formDefile) }}
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Nom</th>
            <th>Description</th>
            <th>Catégorie</th>
            <th>Date</th>
            <th>Mannequins</th>
        </tr>
    </thead>
    <tbody>
        {% for defile in defiles %}
            <tr>
                <td>{{ defile.nom }}</td>
                <td>{{ defile.description }}</td>
                <td>{{ defile.categorie.nom }}</td>
                <td>{{ defile.date|date('Y-m-d') }}</td>
                <td>
                    {% for mannequin in defile.mannequins %}
                        {{ mannequin.nom }}{% if not loop.last %}, {% endif %}
                    {% endfor %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5" class="text-center">Aucun défilé trouvé.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>


<div class="cancel-button-container">
    <a href="{{ path('admin_defiles') }}" class="btn btn-secondary btn-block">Annuler</a>
</div>

{% endblock %}

{% block javascript %}
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        $('select').select2();  
    });
</script>
{% endblock %}
